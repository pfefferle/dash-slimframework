<!DOCTYPE html>
<html lang="en"><!-- Mirrored from www.slimframework.com/docs/v3/objects/request.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 19 Jun 2019 12:43:43 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

        <meta charset="utf-8"/>
        <meta content="width=device-width, initial-scale=1, maximum-scale=1" name="viewport"/>
        <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible"/>
        <title>Request - Slim Framework</title>
        <meta content="" name="description"/>
        <meta content="index, follow" name="robots"/>
        <meta content="Request" property="og:title"/>
        <meta content="Slim Framework" property="og:site_name"/>
        <meta content="request.html" property="og:url"/>
        <meta content="" property="og:description"/>
        <meta content="website" property="og:type"/>
        <!--[if lt IE 9]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
        <link href="../../../assets/css/all.css" rel="stylesheet"/>
        <link href="../../../assets/images/favicon.png" rel="shortcut icon"/>
        <link href="../../../../maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"/>
        
        
        
    </head>
    <body style="padding-top: 5em">
        

<div class="wrapper docs">
    <div class="container-fluid">
        

        <div class="row">
            

            <div class="col-md-8 docs-content">
                <h1 class="page-header"><a class="dashAnchor" name="//apple_ref/cpp/Section/Request"></a>Request</h1>
                <div class="edit-panel" style="margin: 0 0 1em 0;">
                    <a class="btn btn-default btn-sm" href="https://github.com/slimphp/Slim-Website/tree/gh-pages/docs/v3/objects/request.md" role="button" target="_blank"><i class="fa fa-github"></i> Edit This Page</a>
                    
                </div>
                <p>Your Slim app’s routes and middleware are given a PSR 7 request object that
represents the current HTTP request received by your web server. The request
object implements the <a href="http://www.php-fig.org/psr/psr-7/#3-2-1-psr-http-message-serverrequestinterface">PSR 7 ServerRequestInterface</a> with which you can
inspect and manipulate the HTTP request method, headers, and body.</p>

<h2 id="how-to-get-the-request-object"><a class="dashAnchor" name="//apple_ref/cpp/Section/How%20to%20get%20the%20Request%20object"></a>How to get the Request object</h2>

<p>The PSR 7 request object is injected into your Slim application routes as the
first argument to the route callback like this:</p>

<figure>
  <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="k">use</span> <span class="nx">Psr\Http\Message\ServerRequestInterface</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Psr\Http\Message\ResponseInterface</span><span class="p">;</span>

<span class="nv">$app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Slim\App</span><span class="p">;</span>
<span class="nv">$app</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'/foo'</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nx">ServerRequestInterface</span> <span class="nv">$request</span><span class="p">,</span> <span class="nx">ResponseInterface</span> <span class="nv">$response</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Use the PSR 7 $request object
</span>
    <span class="k">return</span> <span class="nv">$response</span><span class="p">;</span>
<span class="p">});</span>
<span class="nv">$app</span><span class="o">-&gt;</span><span class="na">run</span><span class="p">();</span>
</code></pre></div>  </div>
  <figcaption>Figure 1: Inject PSR 7 request into application route callback.</figcaption>
</figure>

<p>The PSR 7 request object is injected into your Slim application <em>middleware</em>
as the first argument of the middleware callable like this:</p>

<figure>
  <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="k">use</span> <span class="nx">Psr\Http\Message\ServerRequestInterface</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Psr\Http\Message\ResponseInterface</span><span class="p">;</span>

<span class="nv">$app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Slim\App</span><span class="p">;</span>
<span class="nv">$app</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nx">ServerRequestInterface</span> <span class="nv">$request</span><span class="p">,</span> <span class="nx">ResponseInterface</span> <span class="nv">$response</span><span class="p">,</span> <span class="nx">callable</span> <span class="nv">$next</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Use the PSR 7 $request object
</span>
    <span class="k">return</span> <span class="nv">$next</span><span class="p">(</span><span class="nv">$request</span><span class="p">,</span> <span class="nv">$response</span><span class="p">);</span>
<span class="p">});</span>
<span class="c1">// Define app routes...
</span><span class="nv">$app</span><span class="o">-&gt;</span><span class="na">run</span><span class="p">();</span>
</code></pre></div>  </div>
  <figcaption>Figure 2: Inject PSR 7 request into application middleware.</figcaption>
</figure>

<h2 id="the-request-method"><a class="dashAnchor" name="//apple_ref/cpp/Section/The%20Request%20Method"></a>The Request Method</h2>

<p>Every HTTP request has a method that is typically one of:</p>

<ul>
  <li>GET</li>
  <li>POST</li>
  <li>PUT</li>
  <li>DELETE</li>
  <li>HEAD</li>
  <li>PATCH</li>
  <li>OPTIONS</li>
</ul>

<p>You can inspect the HTTP request’s method with the Request object method
appropriately named <code class="highlighter-rouge">getMethod()</code>.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$method</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getMethod</span><span class="p">();</span>
</code></pre></div></div>

<p>Because this is a common task, Slim’s
built-in PSR 7 implementation also provides these proprietary methods that return
<code class="highlighter-rouge">true</code> or <code class="highlighter-rouge">false</code>.</p>

<ul>
  <li><code class="highlighter-rouge">$request-&gt;isGet()</code></li>
  <li><code class="highlighter-rouge">$request-&gt;isPost()</code></li>
  <li><code class="highlighter-rouge">$request-&gt;isPut()</code></li>
  <li><code class="highlighter-rouge">$request-&gt;isDelete()</code></li>
  <li><code class="highlighter-rouge">$request-&gt;isHead()</code></li>
  <li><code class="highlighter-rouge">$request-&gt;isPatch()</code></li>
  <li><code class="highlighter-rouge">$request-&gt;isOptions()</code></li>
</ul>

<p>It is possible to fake or <em>override</em> the HTTP request method. This is
useful if, for example, you need to mimic a <code class="highlighter-rouge">PUT</code> request using a traditional
web browser that only supports <code class="highlighter-rouge">GET</code> or <code class="highlighter-rouge">POST</code> requests.</p>

<p>There are two ways to override the HTTP request method. You can include a
<code class="highlighter-rouge">_METHOD</code> parameter in a <code class="highlighter-rouge">POST</code> request’s body. The HTTP request must use the
<code class="highlighter-rouge">application/x-www-form-urlencoded</code> content type.</p>

<figure>
  <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>POST /path HTTP/1.1
Host: example.com
Content-type: application/x-www-form-urlencoded
Content-length: 22

data=value&amp;_METHOD=PUT
</code></pre></div>  </div>
  <figcaption>Figure 3: Override HTTP method with _METHOD parameter.</figcaption>
</figure>

<p>You can also override the HTTP request method with a custom
<code class="highlighter-rouge">X-Http-Method-Override</code> HTTP request header. This works with any HTTP request
content type.</p>

<figure>
  <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>POST /path HTTP/1.1
Host: example.com
Content-type: application/json
Content-length: 16
X-Http-Method-Override: PUT

{"data":"value"}
</code></pre></div>  </div>
  <figcaption>Figure 4: Override HTTP method with X-Http-Method-Override header.</figcaption>
</figure>

<p>You can fetch the <em>original</em> (non-overridden) HTTP method with the PSR 7 Request
object’s method named <code class="highlighter-rouge">getOriginalMethod()</code>.</p>

<h2 id="the-request-uri"><a class="dashAnchor" name="//apple_ref/cpp/Section/The%20Request%20URI"></a>The Request URI</h2>

<p>Every HTTP request has a URI that identifies the requested application
resource. The HTTP request URI has several parts:</p>

<ul>
  <li>Scheme (e.g. <code class="highlighter-rouge">http</code> or <code class="highlighter-rouge">https</code>)</li>
  <li>Host (e.g. <code class="highlighter-rouge">example.com</code>)</li>
  <li>Port (e.g. <code class="highlighter-rouge">80</code> or <code class="highlighter-rouge">443</code>)</li>
  <li>Path (e.g. <code class="highlighter-rouge">/users/1</code>)</li>
  <li>Query string (e.g. <code class="highlighter-rouge">sort=created&amp;dir=asc</code>)</li>
</ul>

<p>You can fetch the PSR 7 Request object’s <a href="http://www.php-fig.org/psr/psr-7/#3-5-psr-http-message-uriinterface">URI object</a> with its <code class="highlighter-rouge">getUri()</code> method:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$uri</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getUri</span><span class="p">();</span>
</code></pre></div></div>

<p>The PSR 7 Request object’s URI is itself an object that provides the following
methods to inspect the HTTP request’s URL parts:</p>

<ul>
  <li><code class="highlighter-rouge">getScheme()</code></li>
  <li><code class="highlighter-rouge">getAuthority()</code></li>
  <li><code class="highlighter-rouge">getUserInfo()</code></li>
  <li><code class="highlighter-rouge">getHost()</code></li>
  <li><code class="highlighter-rouge">getPort()</code></li>
  <li><code class="highlighter-rouge">getPath()</code></li>
  <li><code class="highlighter-rouge">getBasePath()</code></li>
  <li><code class="highlighter-rouge">getQuery()</code> <small>(returns the full query string, e.g. <code class="highlighter-rouge">a=1&amp;b=2</code>)</small></li>
  <li><code class="highlighter-rouge">getFragment()</code></li>
  <li><code class="highlighter-rouge">getBaseUrl()</code></li>
</ul>

<p>You can get the query parameters as an associative array on the Request object using <code class="highlighter-rouge">getQueryParams()</code>.</p>

<p>You can also get a single query parameter value, with optional default value if the parameter is missing, using <code class="highlighter-rouge">getQueryParam($key, $default = null)</code>.</p>

<div class="alert alert-info">
    <div><strong>Base Path</strong></div>
    If your Slim application's front-controller lives in a physical subdirectory
    beneath your document root directory, you can fetch the HTTP request's physical
    base path (relative to the document root) with the Uri object's <code>getBasePath()</code>
    method. This will be an empty string if the Slim application is installed
    in the document root's top-most directory.
</div>

<h2 id="the-request-headers"><a class="dashAnchor" name="//apple_ref/cpp/Section/The%20Request%20Headers"></a>The Request Headers</h2>

<p>Every HTTP request has headers. These are metadata that describe the HTTP
request but are not visible in the request’s body. Slim’s PSR 7
Request object provides several methods to inspect its headers.</p>

<h3 id="get-all-headers"><a class="dashAnchor" name="//apple_ref/cpp/Section/Get%20All%20Headers"></a>Get All Headers</h3>

<p>You can fetch all HTTP request headers as an associative array with the PSR 7
Request object’s <code class="highlighter-rouge">getHeaders()</code> method. The resultant associative array’s keys
are the header names and its values are themselves a numeric array of string
values for their respective header name.</p>

<figure>
  <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$headers</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getHeaders</span><span class="p">();</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$headers</span> <span class="k">as</span> <span class="nv">$name</span> <span class="o">=&gt;</span> <span class="nv">$values</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nv">$name</span> <span class="o">.</span> <span class="s2">": "</span> <span class="o">.</span> <span class="nb">implode</span><span class="p">(</span><span class="s2">", "</span><span class="p">,</span> <span class="nv">$values</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>  </div>
  <figcaption>Figure 5: Fetch and iterate all HTTP request headers as an associative array.</figcaption>
</figure>

<h3 id="get-one-header"><a class="dashAnchor" name="//apple_ref/cpp/Section/Get%20One%20Header"></a>Get One Header</h3>

<p>You can get a single header’s value(s) with the PSR 7 Request object’s <code class="highlighter-rouge">getHeader($name)</code> method. This returns an array of values for the given header name. Remember, <em>a single
HTTP header may have more than one value!</em></p>

<figure>
  <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$headerValueArray</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getHeader</span><span class="p">(</span><span class="s1">'Accept'</span><span class="p">);</span>
</code></pre></div>  </div>
  <figcaption>Figure 6: Get values for a specific HTTP header.</figcaption>
</figure>

<p>You may also fetch a comma-separated string with all values for a given header
with the PSR 7 Request object’s <code class="highlighter-rouge">getHeaderLine($name)</code> method. Unlike the
<code class="highlighter-rouge">getHeader($name)</code> method, this method returns a comma-separated string.</p>

<figure>
  <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$headerValueString</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getHeaderLine</span><span class="p">(</span><span class="s1">'Accept'</span><span class="p">);</span>
</code></pre></div>  </div>
  <figcaption>Figure 7: Get single header's values as comma-separated string.</figcaption>
</figure>

<h3 id="detect-header"><a class="dashAnchor" name="//apple_ref/cpp/Section/Detect%20Header"></a>Detect Header</h3>

<p>You can test for the presence of a header with the PSR 7 Request object’s
<code class="highlighter-rouge">hasHeader($name)</code> method.</p>

<figure>
  <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">hasHeader</span><span class="p">(</span><span class="s1">'Accept'</span><span class="p">))</span> <span class="p">{</span>
    <span class="c1">// Do something
</span><span class="p">}</span>
</code></pre></div>  </div>
  <figcaption>Figure 8: Detect presence of a specific HTTP request header.</figcaption>
</figure>

<h2 id="the-request-body"><a class="dashAnchor" name="//apple_ref/cpp/Section/The%20Request%20Body"></a>The Request Body</h2>

<p>Every HTTP request has a body. If you are building a Slim application that
consumes JSON or XML data, you can use the PSR 7 Request object’s
<code class="highlighter-rouge">getParsedBody()</code> method to parse the HTTP request body into a native PHP format.
Slim can parse JSON, XML, and URL-encoded data out of the box.</p>

<figure>
  <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$parsedBody</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getParsedBody</span><span class="p">();</span>
</code></pre></div>  </div>
  <figcaption>Figure 9: Parse HTTP request body into native PHP format</figcaption>
</figure>

<ul>
  <li>JSON requests are converted into associative arrays with <code class="highlighter-rouge">json_decode($input, true)</code>.</li>
  <li>XML requests are converted into a <code class="highlighter-rouge">SimpleXMLElement</code> with <code class="highlighter-rouge">simplexml_load_string($input)</code>.</li>
  <li>URL-encoded requests are converted into a PHP array with <code class="highlighter-rouge">parse_str($input)</code>.</li>
</ul>

<p>For URL-encoded requests, you can also get a single parameter value, with optional default value if the parameter is missing, using <code class="highlighter-rouge">getParsedBodyParam($key, $default = null)</code>.</p>

<p>Technically speaking, Slim’s PSR 7 Request object represents the HTTP request
body as an instance of <code class="highlighter-rouge">\Psr\Http\Message\StreamInterface</code>. You can get
the HTTP request body <code class="highlighter-rouge">StreamInterface</code> instance with the PSR 7 Request object’s
<code class="highlighter-rouge">getBody()</code> method. The <code class="highlighter-rouge">getBody()</code> method is preferable if the incoming HTTP
request size is unknown or too large for available memory.</p>

<figure>
  <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$body</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getBody</span><span class="p">();</span>
</code></pre></div>  </div>
  <figcaption>Figure 10: Get HTTP request body</figcaption>
</figure>

<p>The resultant <code class="highlighter-rouge">\Psr\Http\Message\StreamInterface</code> instance provides the following
methods to read and iterate its underlying PHP <code class="highlighter-rouge">resource</code>.</p>

<ul>
  <li><code class="highlighter-rouge">getSize()</code></li>
  <li><code class="highlighter-rouge">tell()</code></li>
  <li><code class="highlighter-rouge">eof()</code></li>
  <li><code class="highlighter-rouge">isSeekable()</code></li>
  <li><code class="highlighter-rouge">seek()</code></li>
  <li><code class="highlighter-rouge">rewind()</code></li>
  <li><code class="highlighter-rouge">isWritable()</code></li>
  <li><code class="highlighter-rouge">write($string)</code></li>
  <li><code class="highlighter-rouge">isReadable()</code></li>
  <li><code class="highlighter-rouge">read($length)</code></li>
  <li><code class="highlighter-rouge">getContents()</code></li>
  <li><code class="highlighter-rouge">getMetadata($key = null)</code></li>
</ul>

<h3 id="reparsing-the-body"><a class="dashAnchor" name="//apple_ref/cpp/Section/Reparsing%20the%20body"></a>Reparsing the body</h3>

<p>When calling <code class="highlighter-rouge">getParsedBody</code> on the Request object multiple times, the body is
only parsed once, even if the Request body is modified in the meantime.</p>

<p>To ensure the body is reparsed, the Request object’s method <code class="highlighter-rouge">reparseBody</code> can be
used.</p>

<h2 id="uploaded-files"><a class="dashAnchor" name="//apple_ref/cpp/Section/Uploaded%20Files"></a>Uploaded Files</h2>

<p>The file uploads in <code class="highlighter-rouge">$_FILES</code> are available from the Request object’s
<code class="highlighter-rouge">getUploadedFiles()</code> method. This returns an array keyed by the name of the
<code class="highlighter-rouge">&lt;input&gt;</code> element.</p>

<figure>
  <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$files</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getUploadedFiles</span><span class="p">();</span>
</code></pre></div>  </div>
  <figcaption>Figure 11: Get uploaded files</figcaption>
</figure>

<p>Each object in the <code class="highlighter-rouge">$files</code> array is a instance of
<code class="highlighter-rouge">\Psr\Http\Message\UploadedFileInterface</code> and supports the following methods:</p>

<ul>
  <li><code class="highlighter-rouge">getStream()</code></li>
  <li><code class="highlighter-rouge">moveTo($targetPath)</code></li>
  <li><code class="highlighter-rouge">getSize()</code></li>
  <li><code class="highlighter-rouge">getError()</code></li>
  <li><code class="highlighter-rouge">getClientFilename()</code></li>
  <li><code class="highlighter-rouge">getClientMediaType()</code></li>
</ul>

<p>See the <a href="../cookbook/uploading-files.html">cookbook</a> on how to upload files using a POST form.</p>

<h2 id="request-helpers"><a class="dashAnchor" name="//apple_ref/cpp/Section/Request%20Helpers"></a>Request Helpers</h2>

<p>Slim’s PSR 7 Request implementation provides these additional proprietary methods
to help you further inspect the HTTP request.</p>

<h3 id="detect-xhr-requests"><a class="dashAnchor" name="//apple_ref/cpp/Section/Detect%20XHR%20requests"></a>Detect XHR requests</h3>

<p>You can detect XHR requests with the Request object’s <code class="highlighter-rouge">isXhr()</code> method. This
method detects the presence of the <code class="highlighter-rouge">X-Requested-With</code> HTTP request header and
ensures its value is <code class="highlighter-rouge">XMLHttpRequest</code>.</p>

<figure>
  <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>POST /path HTTP/1.1
Host: example.com
Content-type: application/x-www-form-urlencoded
Content-length: 7
X-Requested-With: XMLHttpRequest

foo=bar
</code></pre></div>  </div>
  <figcaption>Figure 13: Example XHR request.</figcaption>
</figure>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">isXhr</span><span class="p">())</span> <span class="p">{</span>
    <span class="c1">// Do something
</span><span class="p">}</span>
</code></pre></div></div>

<h3 id="content-type"><a class="dashAnchor" name="//apple_ref/cpp/Section/Content%20Type"></a>Content Type</h3>

<p>You can fetch the HTTP request content type with the Request object’s <code class="highlighter-rouge">getContentType()</code> method. This returns the <code class="highlighter-rouge">Content-Type</code> header’s full value as provided by the HTTP client.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$contentType</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getContentType</span><span class="p">();</span>
</code></pre></div></div>

<h3 id="media-type"><a class="dashAnchor" name="//apple_ref/cpp/Section/Media%20Type"></a>Media Type</h3>

<p>You may not want the complete <code class="highlighter-rouge">Content-Type</code> header. What if, instead, you only want the media type? You can fetch the HTTP request media type with the Request object’s <code class="highlighter-rouge">getMediaType()</code> method.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$mediaType</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getMediaType</span><span class="p">();</span>
</code></pre></div></div>

<p>You can fetch the appended media type parameters as an associative array with the Request object’s <code class="highlighter-rouge">getMediaTypeParams()</code> method.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$mediaParams</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getMediaTypeParams</span><span class="p">();</span>
</code></pre></div></div>

<h3 id="character-set"><a class="dashAnchor" name="//apple_ref/cpp/Section/Character%20Set"></a>Character Set</h3>

<p>One of the most common media type parameters is the HTTP request character set. The Request object provides a dedicated method to retrieve this media type parameter.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$charset</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getContentCharset</span><span class="p">();</span>
</code></pre></div></div>

<h3 id="content-length"><a class="dashAnchor" name="//apple_ref/cpp/Section/Content%20Length"></a>Content Length</h3>

<p>You can fetch the HTTP request content length with the Request object’s <code class="highlighter-rouge">getContentLength()</code> method.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$length</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getContentLength</span><span class="p">();</span>
</code></pre></div></div>

<h3 id="request-parameter"><a class="dashAnchor" name="//apple_ref/cpp/Section/Request%20Parameter"></a>Request Parameter</h3>

<p>To fetch single request parameter value, use methods: <code class="highlighter-rouge">getParam()</code>, <code class="highlighter-rouge">getQueryParam()</code>, <code class="highlighter-rouge">getParsedBodyParam()</code>, <code class="highlighter-rouge">getCookieParam()</code>, <code class="highlighter-rouge">getServerParam()</code>, counterparts of PSR-7’s plural form get*Params() methods.</p>

<p>For example, to get a single Server Parameter:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$foo</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getServerParam</span><span class="p">(</span><span class="s1">'HTTP_NOT_EXIST'</span><span class="p">,</span> <span class="s1">'default_value_here'</span><span class="p">);</span>
</code></pre></div></div>

<h2 id="route-object"><a class="dashAnchor" name="//apple_ref/cpp/Section/Route%20Object"></a>Route Object</h2>

<p>Sometimes in middleware you require the parameter of your route.</p>

<p>In this example we are checking first that the user is logged in and second that the user has permissions to view the particular video they are attempting to view.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nv">$app</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'/course/{id}'</span><span class="p">,</span> <span class="nx">Video</span><span class="o">::</span><span class="na">class</span><span class="o">.</span><span class="s2">":watch"</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="nx">Permission</span><span class="o">::</span><span class="na">class</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="nx">Auth</span><span class="o">::</span><span class="na">class</span><span class="p">);</span>

    <span class="c1">//.. In the Permission Class's Invoke
</span>    <span class="sd">/** @var $route \Slim\Route */</span>
    <span class="nv">$route</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getAttribute</span><span class="p">(</span><span class="s1">'route'</span><span class="p">);</span>
    <span class="nv">$courseId</span> <span class="o">=</span> <span class="nv">$route</span><span class="o">-&gt;</span><span class="na">getArgument</span><span class="p">(</span><span class="s1">'id'</span><span class="p">);</span>
</code></pre></div></div>

<h2 id="media-type-parsers"><a class="dashAnchor" name="//apple_ref/cpp/Section/Media%20Type%20Parsers"></a>Media Type Parsers</h2>

<p>Slim looks as the request’s media type and if it recognises it, will parse it into structured data available via <code class="highlighter-rouge">$request-&gt;getParsedBody()</code>. This is usually an array, but is an object for XML media types.</p>

<p>The following media types are recognised and parsed:</p>

<ul>
  <li>application/x-www-form-urlencoded</li>
  <li>application/json</li>
  <li>application/xml &amp; text/xml</li>
</ul>

<p>If you want Slim to parse content from a different media type then you need to either parse the raw body yourself or register a new media parser. Media parsers are simply callables that accept an <code class="highlighter-rouge">$input</code> string and return a parsed object or array.</p>

<p>Register a new media parser in an application or route middleware. Note that you must register the parser before you try to access the parsed body for the first time.</p>

<p>For example, to automatically parse JSON that is sent with a <code class="highlighter-rouge">text/javascript</code> content type, you register a media type parser in middleware like this:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Add the middleware
</span><span class="nv">$app</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nv">$request</span><span class="p">,</span> <span class="nv">$response</span><span class="p">,</span> <span class="nv">$next</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// add media parser
</span>    <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">registerMediaTypeParser</span><span class="p">(</span>
        <span class="s2">"text/javascript"</span><span class="p">,</span>
        <span class="k">function</span> <span class="p">(</span><span class="nv">$input</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nb">json_decode</span><span class="p">(</span><span class="nv">$input</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">);</span>

    <span class="k">return</span> <span class="nv">$next</span><span class="p">(</span><span class="nv">$request</span><span class="p">,</span> <span class="nv">$response</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div>

<h2 id="attributes"><a class="dashAnchor" name="//apple_ref/cpp/Section/Attributes"></a>Attributes</h2>

<p>With PSR-7 it is possible to inject objects/values into the request object for further processing. In your applications middleware often need to pass along information to your route closure and the way to do is it is to add it to the request object via an attribute.</p>

<p>Example, Setting a value on your request object.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$app</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nv">$request</span><span class="p">,</span> <span class="nv">$response</span><span class="p">,</span> <span class="nv">$next</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$request</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">withAttribute</span><span class="p">(</span><span class="s1">'session'</span><span class="p">,</span> <span class="nv">$_SESSION</span><span class="p">);</span> <span class="c1">//add the session storage to your request as [READ-ONLY]
</span>    <span class="k">return</span> <span class="nv">$next</span><span class="p">(</span><span class="nv">$request</span><span class="p">,</span> <span class="nv">$response</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div>

<p>Example, how to retrieve the value.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$app</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'/test'</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$request</span><span class="p">,</span> <span class="nv">$response</span><span class="p">,</span> <span class="nv">$args</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$session</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getAttribute</span><span class="p">(</span><span class="s1">'session'</span><span class="p">);</span> <span class="c1">//get the session from the request
</span>
    <span class="k">return</span> <span class="nv">$response</span><span class="o">-&gt;</span><span class="na">write</span><span class="p">(</span><span class="s1">'Yay, '</span> <span class="o">.</span> <span class="nv">$session</span><span class="p">[</span><span class="s1">'name'</span><span class="p">]);</span>
<span class="p">});</span>
</code></pre></div></div>

<p>The request object also has bulk functions as well. <code class="highlighter-rouge">$request-&gt;getAttributes()</code> and <code class="highlighter-rouge">$request-&gt;withAttributes()</code></p>


                <nav>
                    <ul class="nav pager">
                        
                            
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            
                        
                            
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            
                        
                            
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            
                        
                            
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                
                                  
                        
                            
                            

                                
                                

                                
                                
                                    
                                        <li class="previous">
                                            <a href="application.html" rel="prev"><i class="fa fa-arrow-left"></i> <small>The Application: </small> Overview</a>
                                        </li>
                                    
                                

                                

                                
                                
                                
                            

                                
                                
                                  
                        
                            
                            

                                
                                

                                
                                

                                
                                    <li class="next">
                                        <a href="response.html" rel="next"><small>The Response: </small> Overview <i class="fa fa-arrow-right"></i></a>
                                    </li>
                                

                                
                                
                                
                            

                                
                                
                                  
                        
                            
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                
                                  
                        
                            
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            
                        
                            
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            
                        
                            
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            
                        
                            
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            
                        
                    </ul>
                </nav>
            </div>
        </div>

        <footer class="site-footer">
            <p>
                Created and maintained by <br/>
                <a href="http://joshlockhart.com/">Josh Lockhart</a>,
                <a href="http://www.silentworks.co.uk/" target="_blank">Andrew Smith</a>,
                <a href="http://akrabat.com/" target="_blank">Rob Allen</a>, and the
                <a href="https://github.com/orgs/slimphp/people" target="_blank">Slim Framework Team</a>
            </p>
            <a alt="Donate with PayPal" href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&amp;hosted_button_id=HNUWP9UUGC7L4">Donate with PayPal</a>
        </footer>
    </div>
</div>
        
        
        
        
            
            
        
        
    




</body><!-- Mirrored from www.slimframework.com/docs/v3/objects/request.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 19 Jun 2019 12:43:43 GMT --></html>